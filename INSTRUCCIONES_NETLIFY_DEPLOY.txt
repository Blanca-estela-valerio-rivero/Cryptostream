# üöÄ INSTRUCCIONES PARA DESPLEGAR EN NETLIFY - CRYPTOSTREAM

## ‚ö° ESTADO ACTUAL

‚úÖ **Archivo .env creado** con credenciales de Pinata
‚úÖ **Repositorio en GitHub** listo (rama Blanca)
‚úÖ **Configuraci√≥n Netlify** completada (netlify.toml)
‚úÖ **Backend serverless** configurado (functions/api.js)

## üéØ PR√ìXIMOS PASOS (5 MINUTOS)

### PASO 1: Ve a Netlify Dashboard

```
URL: https://app.netlify.com
```

1. Inicia sesi√≥n en Netlify
2. Si no tienes cuenta, crea una con GitHub

---

### PASO 2: Crea Nuevo Sitio

1. Click en **"Add new site"**
2. Selecciona **"Import an existing project"**
3. Selecciona **"GitHub"**
4. Autoriza a Netlify en GitHub (si pide)

---

### PASO 3: Selecciona el Repositorio

1. Busca **"Cryptostream"**
2. Click en el repositorio
3. Aseg√∫rate de que est√° en rama **"Blanca"**

---

### PASO 4: Configurar Build Settings

**En el formulario que aparece, aseg√∫rate de:**

```
Owner:                  Blanca-estela-valerio-rivero
Repository:             Cryptostream
Branch to deploy:       Blanca

Build settings:
  Build command:        cd backend && npm install
  Publish directory:    frontend/public
  Base directory:       (dejar vac√≠o)
  Functions directory:  functions
```

**‚ö†Ô∏è IMPORTANTE:** NO hagas click en Deploy a√∫n. Primero configura las variables.

---

### PASO 5: Agregar Variables de Entorno

Antes de hacer deploy, agrega las variables:

1. En el mismo formulario, busca la secci√≥n **"Advanced"** o **"Environment"**
2. Click en **"New variable"** (o similar)
3. Agrega CADA una de estas variables:

```
KEY:                    PINATA_API_KEY
VALUE:                  25038791f137b293b9e8

---

KEY:                    PINATA_SECRET_KEY
VALUE:                  25038791f137b293b9e8

---

KEY:                    MONGODB_URI
VALUE:                  mongodb://localhost:27017/cryptostream

---

KEY:                    PORT
VALUE:                  3000

---

KEY:                    STELLAR_NETWORK
VALUE:                  TESTNET
```

**üí° NOTA:** Si MongoDB est√° en la nube (MongoDB Atlas), usa la URI completa en lugar de localhost.

---

### PASO 6: Deploy

1. Una vez agregadas todas las variables
2. Click en **"Deploy site"**
3. Espera a que complete (2-5 minutos)
4. Netlify generar√° una URL: `https://xxxxx.netlify.app`

---

## ‚úÖ VERIFICAR QUE TODO FUNCIONA

Una vez que el deploy complete (verde), verifica:

### Test 1: Frontend Carga

```
Abre en navegador:
https://xxxxx.netlify.app

Debe ver:
- P√°gina principal de CryptoStream
- Sin errores en consola (F12)
```

### Test 2: API Health Check

```
Abre en navegador:
https://xxxxx.netlify.app/api/health

Debe ver respuesta JSON:
{
  "status": "ok",
  "message": "Server is running üöÄ"
}
```

### Test 3: Videos Endpoint

```
Abre en navegador:
https://xxxxx.netlify.app/api/videos

Debe ver:
Array vac√≠o [] o con videos [...]
```

### Test 4: Verificar Logs

En Netlify Dashboard:

```
1. Selecciona tu sitio
2. Click en √∫ltimo "Deploy" (debe ser verde)
3. Pesta√±a "Functions"
4. Verifica que NO hay errores rojos
5. Busca logs de requests a /api
```

---

## üîç POSIBLES ERRORES Y SOLUCIONES

### Error: "Cannot GET /api/health" (404)

**Causa:** Netlify no encontr√≥ la funci√≥n serverless

**Soluci√≥n:**
```
1. Ve a Deploys
2. Click en el deploy (verde)
3. Click "Redeploy" o "Deploy again"
4. Espera 2 minutos
5. Intenta acceder a /api/health de nuevo
```

### Error: "PINATA_API_KEY is undefined"

**Causa:** Las variables de entorno no se guardaron

**Soluci√≥n:**
```
1. Site settings ‚Üí Build & deploy ‚Üí Environment
2. Verifica que las variables est√°n listadas
3. Si no, agr√©galas de nuevo
4. Redeploy: Deploys ‚Üí Trigger deploy ‚Üí Deploy site
```

### Error: "Cannot connect to MongoDB"

**Causa:** MongoDB local no est√° disponible en producci√≥n

**Soluci√≥n:**
```
Opci√≥n A: Usa MongoDB Atlas (cloud)
  1. Ve a https://mongodb.com/cloud/atlas
  2. Crea cluster gratuito
  3. Obt√©n connection string
  4. Actualiza MONGODB_URI en Netlify
  5. Redeploy

Opci√≥n B: Por ahora, solo usa sin guardar videos
  - La app funcionar√° sin BD
  - Los videos se procesar√°n pero no se guardar√°n
```

### Error: "Cannot upload to IPFS"

**Causa:** Credenciales de Pinata incorrectas

**Soluci√≥n:**
```
1. Ve a https://pinata.cloud
2. Verifica que tu API Key es: 25038791f137b293b9e8
3. En Netlify, actualiza PINATA_API_KEY
4. Redeploy
```

---

## üìä URL FINAL

Despu√©s de desplegar exitosamente:

```
üåê Frontend:         https://xxxxx.netlify.app
üîå API:              https://xxxxx.netlify.app/api
üíö Health Check:     https://xxxxx.netlify.app/api/health
üé¨ Videos:           https://xxxxx.netlify.app/api/videos
üöÄ Dashboard:        https://app.netlify.com
```

---

## üíæ RESUMEN DE ARCHIVOS

El archivo `.env` NUNCA se sube a GitHub (est√° en .gitignore).

En Netlify, las variables se configuran en el Dashboard (en "Environment").

```
LOCAL (.env):
  PINATA_API_KEY=25038791f137b293b9e8
  PINATA_SECRET_KEY=25038791f137b293b9e8
  ... m√°s variables

NETLIFY (Dashboard):
  Variables ‚Üí Environment ‚Üí PINATA_API_KEY, etc.
```

---

## üéâ CUANDO TODO FUNCIONE

1. **Comparte la URL** con otros usuarios
2. **Prueba funcionalidades**:
   - Crear cuenta
   - Conectar wallet Stellar
   - Subir video (si Pinata funciona)
   - Ver videos
3. **Monitorea logs** en Netlify Dashboard regularmente

---

## ‚ùì PREGUNTAS FRECUENTES

**P: ¬øCu√°nto tarda el deploy?**
R: 2-5 minutos normalmente. Si tarda m√°s, revisa los logs.

**P: ¬øPuedo cambiar el nombre del sitio?**
R: S√≠, en Site settings ‚Üí Change site name.

**P: ¬øNecesito un dominio personalizado?**
R: No, Netlify te da un dominio gratuito (.netlify.app).

**P: ¬øQu√© si los videos no se suben?**
R: Verifica las credenciales de Pinata en Netlify ‚Üí Environment.

**P: ¬øC√≥mo veo los logs?**
R: Netlify Dashboard ‚Üí Tu sitio ‚Üí Deploys ‚Üí Tu deploy ‚Üí Functions.

---

## üìû SOPORTE

Si algo no funciona:

1. **Lee DEPLOYMENT_CHECKLIST.md** en el repo
2. **Revisa los logs** en Netlify Dashboard
3. **Busca el error** en ARQUITECTURA_NETLIFY.md

---

**¬°LISTO PARA DESPLEGAR! üöÄ**

Sigue estos pasos y tu CryptoStream estar√° en vivo en menos de 10 minutos.

√öltima actualizaci√≥n: 3 de diciembre de 2025
